# -*- coding: utf-8 -*-
"""lesly juego

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1OMvIAIzxUoRMxAWjp-R5iJ8qaUHo6ExW
"""

import json

nuevas_preguntas = {
    "Diversidad Sexual": [
        {
            "texto": "ğŸŒˆ Â¿QuÃ© representa la bandera del arcoÃ­ris?",
            "opciones": {
                "a": "Un sÃ­mbolo religioso",
                "b": "La diversidad sexual y de gÃ©nero",
                "c": "Una marca de ropa"
            },
            "respuesta_correcta": "b"
        }
    ],
    "ETS y PrevenciÃ³n": [
        {
            "texto": "ğŸ§ª Â¿QuÃ© es una ETS?",
            "opciones": {
                "a": "Una evaluaciÃ³n tÃ©cnica",
                "b": "Una enfermedad de transmisiÃ³n sexual",
                "c": "Una estrategia terapÃ©utica"
            },
            "respuesta_correcta": "b"
        }
    ],
    "Relaciones Sanas": [
        {
            "texto": "ğŸ’¬ Â¿QuÃ© es fundamental en una relaciÃ³n sana?",
            "opciones": {
                "a": "Celos y control",
                "b": "ComunicaciÃ³n y respeto",
                "c": "Obediencia absoluta"
            },
            "respuesta_correcta": "b"
        }
    ],
    "Pubertad y Cambios": [
        {
            "texto": "ğŸ”„ Â¿QuÃ© ocurre en la pubertad?",
            "opciones": {
                "a": "Se detiene el crecimiento",
                "b": "Cambios fÃ­sicos, emocionales y hormonales",
                "c": "Nada relevante"
            },
            "respuesta_correcta": "b"
        }
    ]
}

with open("nuevas_preguntas_sexualidad.json", "w", encoding="utf-8") as f:
    json.dump(nuevas_preguntas, f, indent=2, ensure_ascii=False)

print("âœ… Nuevo archivo de preguntas creado.")

import time
import json
from abc import ABC, abstractmethod
from datetime import datetime

# --------------------
# CLASE ABSTRACTA BASE
# --------------------
class SalaBase(ABC):
    def __init__(self, nombre, preguntas, emoji):
        self.nombre = nombre
        self.preguntas = preguntas
        self.emoji = emoji

    def entrar(self):
        print(f"\n{self.emoji} Has entrado en la sala de {self.nombre.upper()} {self.emoji}")
        time.sleep(1)
        return self.evento()

    @abstractmethod
    def evento(self):
        pass


# --------------------
# CLASE CONCRETA
# --------------------
class SalaConcreta(SalaBase):
    def evento(self):
        aciertos = 0
        for i, p in enumerate(self.preguntas, 1):
            print(f"\n{i}ï¸âƒ£ {p['texto']}")
            for clave, valor in p["opciones"].items():
                print(f"   {clave}) {valor}")
            respuesta = input("ğŸ‘‰ Tu respuesta: ").strip().lower()
            correcta = p["respuesta_correcta"]
            if respuesta == correcta:
                print("âœ… Â¡Correcto!")
                aciertos += 1
            else:
                print("âŒ Incorrecto.")
                print(f"ğŸ‘‰ La respuesta correcta era: '{correcta}) {p['opciones'][correcta]}'")
            time.sleep(1)
        if aciertos >= 1:
            print(f"\nğŸ‰ Â¡Has conquistado la sala de {self.nombre}! ğŸ‰")
            return True
        else:
            print(f"\nâš ï¸ No pasaste la sala de {self.nombre}. Â¡Pero sigues en la aventura!")
            return False


# --------------------
# UTILIDADES
# --------------------
def cargar_preguntas_desde_json(archivo):
    with open(archivo, "r", encoding="utf-8") as f:
        return json.load(f)

def guardar_resultado(nombre, progreso):
    fecha = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    mensaje = (
        f"Jugador: {nombre}\n"
        f"Fecha: {fecha}\n"
        f"Salas superadas: {progreso}/4\n"
        f"{'-'*30}\n"
    )
    with open("resultados_juego.txt", "a", encoding="utf-8") as f:
        f.write(mensaje)
    print("ğŸ’¾ Resultado guardado en 'resultados_juego.txt'.")


# --------------------
# JUEGO PRINCIPAL
# --------------------
def iniciar_juego():
    print("ğŸ® Bienvenido al Juego de EducaciÃ³n Sexual (VersiÃ³n 2) ğŸ®")
    nombre = input("ğŸ“ Â¿CuÃ¡l es tu nombre, explorador(a)? ")
    print(f"\nğŸ‘‹ Â¡Hola {nombre}! Tu misiÃ³n es conquistar 4 salas del conocimiento.\n")
    time.sleep(2)

    preguntas_por_sala = cargar_preguntas_desde_json("nuevas_preguntas_sexualidad.json")

    salas = [
        SalaConcreta("Diversidad Sexual", preguntas_por_sala["Diversidad Sexual"], "ğŸŒˆ"),
        SalaConcreta("ETS y PrevenciÃ³n", preguntas_por_sala["ETS y PrevenciÃ³n"], "ğŸ§ª"),
        SalaConcreta("Relaciones Sanas", preguntas_por_sala["Relaciones Sanas"], "ğŸ’¬"),
        SalaConcreta("Pubertad y Cambios", preguntas_por_sala["Pubertad y Cambios"], "ğŸ”„")
    ]

    progreso = 0
    for sala in salas:
        if sala.entrar():
            progreso += 1
        time.sleep(1.5)

    print("\nğŸ“Š RESULTADOS FINALES:")
    print(f"ğŸ† Salas superadas: {progreso}/4")

    if progreso == 4:
        print("\nğŸŠ Â¡FELICIDADES! Has demostrado gran conocimiento sobre sexualidad ğŸŠ")
    elif progreso >= 2:
        print("\nğŸš€ Â¡Buen trabajo! EstÃ¡s en camino de comprender tu sexualidad.")
    else:
        print("\nğŸ“š Â¡Sigue aprendiendo! La informaciÃ³n es tu mejor aliada.")

    guardar_resultado(nombre, progreso)

# Ejecutar el juego
iniciar_juego()